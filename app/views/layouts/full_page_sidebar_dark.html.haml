!!!
%html{ lang: "en" }
  - @random_theme ? render("themes/random") : render("themes/theme")
  %head
    %meta{ charset: "utf-8" }
    %meta{ content: "IE=Edge,chrome=1", http: { equiv: "X-UA-Compatible" } }
    %meta{ name: "viewport", content: "width=device-width, initial-scale=1, shrink-to-fit=no" }
    = render "layouts/meta/general"
    = render "layouts/meta/facebook"
    = render "layouts/meta/google"
    = render "layouts/meta/apple"
    -# Don't cache any pages
    %meta{ name: "turbolinks-cache-control", content: "no-cache" }
    %title= [@title, @subject.try(:subject_code_was), @project.try(:name), ENV["website_name"]].flatten.compact.uniq.join(" - ")
    = render "layouts/meta/favicon"
    = csrf_meta_tags
    = stylesheet_link_tag "application", media: "all", data: { turbolinks_track: "reload" }
    = javascript_include_tag "application", data: { turbolinks_track: "reload" }
    = javascript_tag "var root_url=\"#{request.script_name + "/"}\";"
  %body#top.full-page-no-header.theme-bg{ class: "theme-#{@theme}-bg", data: { theme: @theme } }
    - @container = "container-fluid"
    - @nocontainer = true
    .row.no-gutters.flex-md-nowrap
      = yield :sidebar
      .col
        .page-box.last-box.p-0
          = render "layouts/features/service_announcement"
          = render "layouts/features/flash_bar"
          = render "layouts/features/sound_enabled" # Slice extra
          = render "layouts/features/timeout" # Slice extra
          = render "layouts/features/notifications" # Slice extra
          #top-menu.top-menu= render "menu/menu", container: "#{@container.presence} px-lg-0", hide_logo: true
          - if content_for?(:header)
            .header-container
              .container-fluid
                %h1.page-heading
                  = yield :header
          - if content_for?(:tabs)
            .header-tabs{ class: "#{"header-tabs-no-breadcrumbs" unless content_for?(:breadcrumbs)}" }
              .container-fluid
                = yield :tabs
          - if content_for?(:breadcrumbs)
            .breadcrumb-container
              .container-fluid
                .px-1= yield :breadcrumbs
          .theme-custom-spacing
            = render "sidebar/mini_mobile"
            = yield(:sidebar_mobile)
            %main.p-3.remove-last-margin{ role: "main" }= yield
          = yield :footer
    = render "layouts/footer", container: @container.presence
